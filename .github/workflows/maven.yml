name: 🧪 Run TestNG Suites

on:
  workflow_dispatch:
    inputs:
      suiteFile:
        description: 'Select TestNG suite XML to run'
        required: false
        type: choice
        options:
          - testngHybrid.xml
          - testngpParallelRun.xml
          - testngAdminAsignee.xml
          - testngselenium.xml
        default: testngHybrid.xml

  push:
    branches: [ main ]

jobs:
  run-tests:
    runs-on: ubuntu-latest

    steps:
      - name: ⬇️ Checkout Code
        uses: actions/checkout@v4

      - name: ☕ Set up JDK 17
        uses: actions/setup-java@v4
        with:
          distribution: 'temurin'
          java-version: '17'

      - name: 🧪 Run Tests (selected or default XML)
        run: |
          XML_FILE="${{ github.event.inputs.suiteFile }}"
          if [ -z "$XML_FILE" ]; then
            XML_FILE="testngHybrid.xml"
          fi
          echo "Running suite: $XML_FILE"
          mvn clean test -Dheadless=true -Dsurefire.suiteXmlFiles=./$XML_FILE
